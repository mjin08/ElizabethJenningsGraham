{"ast":null,"code":"var _jsxFileName = \"/Users/maggiejin/cse495/lizzie-graham/src/screens/PlayerWindow.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst idleVideos = ['/assets/idle/idle1.mp4', '/assets/idle/idle2.mp4', '/assets/idle/idle3.mp4', '/assets/idle/idle4.mp4'];\nexport default function PlayerWindow() {\n  _s();\n  const videoRef = useRef(null);\n  const [src, setSrc] = useState(idleVideos[Math.floor(Math.random() * idleVideos.length)]);\n  useEffect(() => {\n    let mounted = true;\n    function pickNext() {\n      if (!mounted) return;\n      const next = idleVideos[Math.floor(Math.random() * idleVideos.length)];\n      setSrc(next);\n    }\n    const interval = setInterval(() => {\n      pickNext();\n    }, 7000); // change idle every 7s\n\n    // Listen for broadcast messages to play answer\n    let ch;\n    if ('BroadcastChannel' in window) {\n      ch = new BroadcastChannel('graham-player-channel');\n      ch.onmessage = ev => {\n        const data = ev.data;\n        if (!data) return;\n        if (data.type === 'playAnswer' && data.questionId) {\n          // map questionId to answer src\n          const mapping = {\n            important: '/assets/answers/why-important.mp4',\n            job: '/assets/answers/job.mp4',\n            life: '/assets/answers/life.mp4',\n            family: '/assets/answers/family.mp4',\n            interests: '/assets/answers/interests.mp4',\n            legacy: '/assets/answers/legacy.mp4',\n            court: '/assets/answers/court.mp4',\n            impact: '/assets/answers/impact.mp4',\n            civic: '/assets/answers/civic.mp4',\n            suffrage: '/assets/answers/suffrage.mp4'\n          };\n          const ans = mapping[data.questionId];\n          if (ans) {\n            // stop idle interval and play answer once\n            clearInterval(interval);\n            setSrc(ans);\n            // after answer ends, resume idle\n            const onEnded = () => {\n              const next = idleVideos[Math.floor(Math.random() * idleVideos.length)];\n              setSrc(next);\n              // restart interval\n              setInterval(() => {\n                const n = idleVideos[Math.floor(Math.random() * idleVideos.length)];\n                setSrc(n);\n              }, 7000);\n              if (videoRef.current) videoRef.current.removeEventListener('ended', onEnded);\n            };\n            setTimeout(() => {\n              if (videoRef.current) videoRef.current.addEventListener('ended', onEnded);\n            }, 200);\n          }\n        }\n        if (data.type === 'playAnswerSpoken' && data.text) {\n          // For spoken free-form, just display an idle shot and (later) integrate semantic lookup\n          // For now: show the first idle then resume\n          setSrc(idleVideos[0]);\n        }\n      };\n    } else {\n      // fallback: listen to storage events\n      window.addEventListener('storage', ev => {\n        if (ev.key === 'graham-player-msg' && ev.newValue) {\n          try {\n            const data = JSON.parse(ev.newValue);\n            if (data.type === 'playAnswer') {\n              const mapping = {\n                important: '/assets/answers/why-important.mp4'\n                // ... other mapping omitted for brevity\n              };\n              const ans = mapping[data.questionId];\n              if (ans) setSrc(ans);\n            }\n          } catch (e) {}\n        }\n      });\n    }\n    return () => {\n      mounted = false;\n      clearInterval(interval);\n      if (ch) ch.close();\n    };\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      height: '100vh',\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'center',\n      background: '#000'\n    },\n    children: /*#__PURE__*/_jsxDEV(\"video\", {\n      src: src,\n      autoPlay: true,\n      loop: true,\n      muted: true,\n      style: {\n        width: '100%',\n        height: '100%',\n        objectFit: 'cover'\n      },\n      ref: videoRef\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 95,\n    columnNumber: 5\n  }, this);\n}\n_s(PlayerWindow, \"IVDQizLcC8H/eDd84evSot2QV6I=\");\n_c = PlayerWindow;\nvar _c;\n$RefreshReg$(_c, \"PlayerWindow\");","map":{"version":3,"names":["React","useEffect","useRef","useState","jsxDEV","_jsxDEV","idleVideos","PlayerWindow","_s","videoRef","src","setSrc","Math","floor","random","length","mounted","pickNext","next","interval","setInterval","ch","window","BroadcastChannel","onmessage","ev","data","type","questionId","mapping","important","job","life","family","interests","legacy","court","impact","civic","suffrage","ans","clearInterval","onEnded","n","current","removeEventListener","setTimeout","addEventListener","text","key","newValue","JSON","parse","e","close","style","height","display","alignItems","justifyContent","background","children","autoPlay","loop","muted","width","objectFit","ref","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/maggiejin/cse495/lizzie-graham/src/screens/PlayerWindow.jsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\n\nconst idleVideos = [\n  '/assets/idle/idle1.mp4',\n  '/assets/idle/idle2.mp4',\n  '/assets/idle/idle3.mp4',\n  '/assets/idle/idle4.mp4'\n];\n\nexport default function PlayerWindow() {\n  const videoRef = useRef(null);\n  const [src, setSrc] = useState(idleVideos[Math.floor(Math.random() * idleVideos.length)]);\n\n  useEffect(() => {\n    let mounted = true;\n\n    function pickNext() {\n      if (!mounted) return;\n      const next = idleVideos[Math.floor(Math.random() * idleVideos.length)];\n      setSrc(next);\n    }\n\n    const interval = setInterval(() => {\n      pickNext();\n    }, 7000); // change idle every 7s\n\n    // Listen for broadcast messages to play answer\n    let ch;\n    if ('BroadcastChannel' in window) {\n      ch = new BroadcastChannel('graham-player-channel');\n      ch.onmessage = (ev) => {\n        const data = ev.data;\n        if (!data) return;\n        if (data.type === 'playAnswer' && data.questionId) {\n          // map questionId to answer src\n          const mapping = {\n            important: '/assets/answers/why-important.mp4',\n            job: '/assets/answers/job.mp4',\n            life: '/assets/answers/life.mp4',\n            family: '/assets/answers/family.mp4',\n            interests: '/assets/answers/interests.mp4',\n            legacy: '/assets/answers/legacy.mp4',\n            court: '/assets/answers/court.mp4',\n            impact: '/assets/answers/impact.mp4',\n            civic: '/assets/answers/civic.mp4',\n            suffrage: '/assets/answers/suffrage.mp4'\n          };\n          const ans = mapping[data.questionId];\n          if (ans) {\n            // stop idle interval and play answer once\n            clearInterval(interval);\n            setSrc(ans);\n            // after answer ends, resume idle\n            const onEnded = () => {\n              const next = idleVideos[Math.floor(Math.random() * idleVideos.length)];\n              setSrc(next);\n              // restart interval\n              setInterval(() => { const n = idleVideos[Math.floor(Math.random() * idleVideos.length)]; setSrc(n); }, 7000);\n              if (videoRef.current) videoRef.current.removeEventListener('ended', onEnded);\n            };\n            setTimeout(() => {\n              if (videoRef.current) videoRef.current.addEventListener('ended', onEnded);\n            }, 200);\n          }\n        }\n        if (data.type === 'playAnswerSpoken' && data.text) {\n          // For spoken free-form, just display an idle shot and (later) integrate semantic lookup\n          // For now: show the first idle then resume\n          setSrc(idleVideos[0]);\n        }\n      };\n    } else {\n      // fallback: listen to storage events\n      window.addEventListener('storage', (ev) => {\n        if (ev.key === 'graham-player-msg' && ev.newValue) {\n          try {\n            const data = JSON.parse(ev.newValue);\n            if (data.type === 'playAnswer') {\n              const mapping = {\n                important: '/assets/answers/why-important.mp4'\n                // ... other mapping omitted for brevity\n              };\n              const ans = mapping[data.questionId];\n              if (ans) setSrc(ans);\n            }\n          } catch (e) {}\n        }\n      });\n    }\n\n    return () => { mounted = false; clearInterval(interval); if (ch) ch.close(); };\n  }, []);\n\n  return (\n    <div style={{height:'100vh',display:'flex',alignItems:'center',justifyContent:'center',background:'#000'}}>\n      <video src={src} autoPlay loop muted style={{width:'100%',height:'100%',objectFit:'cover'}} ref={videoRef} />\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}